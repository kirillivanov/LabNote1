<section class="container_12">
<div  class="grid_12 push_4 auth" style="margin-top: 10px;">

  <script type="text/javascript" charset="utf-8">
    $(function () {
      new Highcharts.Chart({
        chart: { renderTo: 'experiments-graph' },
        title: { text: '<%= @project.name %>' },
        xAxis: { 
                 type: 'datetime',
                 tickInterval: 7 * 24 * 3600 * 100, // one week
                 tickWidth: 0, 
               },
        yAxis: {
          title: { text: 'Researchers'}, tickInterval: 1
        },
        series: [
        <% @project.researchers.each_with_index do |r, i| %>
          { 
            name: '<%= r.name %>',
            pointInterval: <%= 1.day * 1000 %>,
            pointStart: <%=  3.weeks.ago.at_midnight.to_i * 1000  %>,
            data: <%= r.experiments.map {|e| [ e.created_at.to_i * 1000, i+1] }.inspect %>
            //data: <%= r.experiments.map { |e| { name: e.name, x: @project.created_at.to_i, y: 5 }  }.inspect %>
          },
        <% end %>
        ]
      });
    });
  </script>

  <div id="experiments-graph" style="width: 500px; height: 400px;">
  </div>

<div style="margin-top: 10px">
  <p>
    <%= link_to "back", root_path, :class => "button green"  %>
    <%= link_to "Edit", edit_project_path(@project), :class => "button blue" %> 
    <%= link_to "Destroy", @project, :confirm => 'Are you sure?', :method => :delete, :class => "button red" %>  
  </p>
</div>


</div>
</section>